<!DOCTYPE html>
<html lang="en-us">

<head>
    <meta charset="utf-8">
    <!--<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">-->
    <title> 스마트다이렉트카 관리자 </title>
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <!-- Basic Styles -->
    <link rel="stylesheet" type="text/css" media="screen" href="css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" media="screen" href="css/font-awesome.min.css">
    <!-- SmartAdmin Styles : Caution! DO NOT change the order -->
    <link rel="stylesheet" type="text/css" media="screen" href="css/smartadmin-production-plugins.min.css">
    <link rel="stylesheet" type="text/css" media="screen" href="css/smartadmin-production.min.css">
    <link rel="stylesheet" type="text/css" media="screen" href="css/smartadmin-skins.min.css">
    <!-- SmartAdmin RTL Support  -->
    <link rel="stylesheet" type="text/css" media="screen" href="css/smartadmin-rtl.min.css">
    <!-- We recommend you use "your_style.css" to override SmartAdmin
             specific styles this will also ensure you retrain your customization with each SmartAdmin update. -->
    <link rel="stylesheet" type="text/css" media="screen" href="css/your_style.css">
    <!-- Demo purpose only: goes with demo.js, you can delete this css when designing your own WebApp -->
    <!-- Date range picker-->
    <link rel="stylesheet" type="text/css" href="css/plugins/daterangepicker/daterangepicker.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="css/demo.min.css">
    <!-- FAVICONS -->
    <link rel="shortcut icon" href="img/favicon/favicon.ico" type="image/x-icon">
    <link rel="icon" href="img/favicon/favicon.ico" type="image/x-icon">
    <!-- GOOGLE FONT -->
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,300,400,700">
    <!-- Specifying a Webpage Icon for Web Clip 
             Ref: https://developer.apple.com/library/ios/documentation/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html -->
    <link rel="apple-touch-icon" href="img/splash/sptouch-icon-iphone.png">
    <link rel="apple-touch-icon" sizes="76x76" href="img/splash/touch-icon-ipad.png">
    <link rel="apple-touch-icon" sizes="120x120" href="img/splash/touch-icon-iphone-retina.png">
    <link rel="apple-touch-icon" sizes="152x152" href="img/splash/touch-icon-ipad-retina.png">
    <!-- iOS web-app metas : hides Safari UI Components and Changes Status Bar Appearance -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <!-- Startup image for web apps -->
    <link rel="apple-touch-startup-image" href="img/splash/ipad-landscape.png" media="screen and (min-device-width: 481px) and (max-device-width: 1024px) and (orientation:landscape)">
    <link rel="apple-touch-startup-image" href="img/splash/ipad-portrait.png" media="screen and (min-device-width: 481px) and (max-device-width: 1024px) and (orientation:portrait)">
    <link rel="apple-touch-startup-image" href="img/splash/iphone.png" media="screen and (max-device-width: 320px)">
    
</head>
<!--

    TABLE OF CONTENTS.
    
    Use search to find needed section.
    
    ===================================================================
    
    |  01. #CSS Links                |  all CSS links and file paths  |
    |  02. #FAVICONS                 |  Favicon links and file paths  |
    |  03. #GOOGLE FONT              |  Google font link              |
    |  04. #APP SCREEN / ICONS       |  app icons, screen backdrops   |
    |  05. #BODY                     |  body tag                      |
    |  06. #HEADER                   |  header tag                    |
    |  07. #PROJECTS                 |  project lists                 |
    |  08. #TOGGLE LAYOUT BUTTONS    |  layout buttons and actions    |
    |  09. #MOBILE                   |  mobile view dropdown          |
    |  10. #SEARCH                   |  search field                  |
    |  11. #NAVIGATION               |  left panel & navigation       |
    |  12. #RIGHT PANEL              |  right panel userlist          |
    |  13. #MAIN PANEL               |  main panel                    |
    |  14. #MAIN CONTENT             |  content holder                |
    |  15. #PAGE FOOTER              |  page footer                   |
    |  16. #SHORTCUT AREA            |  dropdown shortcuts area       |
    |  17. #PLUGINS                  |  all scripts and plugins       |
    
    ===================================================================
    
    -->
<!-- #BODY -->
<!-- Possible Classes

        * 'smart-style-{SKIN#}'
        * 'smart-rtl'         - Switch theme mode to RTL
        * 'menu-on-top'       - Switch to top navigation (no DOM change required)
        * 'no-menu'           - Hides the menu completely
        * 'hidden-menu'       - Hides the main menu but still accessable by hovering over left edge
        * 'fixed-header'      - Fixes the header
        * 'fixed-navigation'  - Fixes the main menu
        * 'fixed-ribbon'      - Fixes breadcrumb
        * 'fixed-page-footer' - Fixes footer
        * 'container'         - boxed layout mode (non-responsive: will not work with fixed-navigation & fixed-ribbon)
    -->

<body class="">
    <!-- HEADER -->
    <header id="header">
    </header>
    <!-- END HEADER -->
    <!-- Left panel : Navigation area -->
    <!-- Note: This width of the aside area can be adjusted through LESS variables -->
    <aside id="left-panel">
        <!-- User info -->
        <div class="login-info">
            <span> <!-- User image size is adjusted inside CSS, it should stay as it --> 

                    <a href="javascript:void(0);" id="show-shortcut" data-action="toggleShortcut">
                        <img src="img/avatars/sunny.png" alt="me" class="online" /> 
                        <span>
                            john.doe 
                        </span>
            <i class="fa fa-angle-down"></i>
            </a>
            </span>
        </div>
        <!-- end user info -->
        <!-- NAVIGATION : This navigation is also responsive-->
        <nav>
        </nav>
        <span class="minifyme" data-action="minifyMenu"> 
                <i class="fa fa-arrow-circle-left hit"></i> 
            </span>
    </aside>
    <!-- END NAVIGATION -->
    <!-- MAIN PANEL -->
    <div id="main" role="main">
        <!-- RIBBON -->
        <div id="ribbon">
        </div>
        <!-- END RIBBON -->
        

        <!-- MAIN CONTENT -->
        <div id="content">
            <!-- widget grid -->
            <section id="widget-grid" class="">
                <!-- row -->
                <div class="row">
                    <!-- NEW WIDGET START -->
                    <article class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                        <div class="widget-body-toolbar no-margin" >
                            <div class="row search-field">
                                <!-- <div class="col-md-5 col-lg-5">
                                    <label class="font-normal">등록일 From ~ To</label>
                                    <div class="form-inline">
                                        <div class="form-group">
                                            <div class="input-group inline-div">
                                                <input class="form-control" id="fromDate" name="datefilter" type="text" placeholder="Select a date" readonly="readonly">
                                                <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="input-group inline-div">
                                                <input class="form-control" id="toDate" name="datefilter" type="text" placeholder="Select a date" readonly="readonly">
                                                <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                                            </div>
                                        </div>
                                    </div>
                                </div> -->
                                <div class="col-md-4 col-lg-4 search-field-first">
                                    <label class="font-normal">등록일 From ~ To</label>
                                    <div class="input-group">
                                        <input class="form-control" id="fromDate" name="datefilter" type="text" placeholder="Select a date" readonly="readonly">
                                        <span class="input-group-addon between-input-group-btn"><i class="fa fa-calendar"></i></span>
                                        <span class="input-group-addon between-input-group-label">~</span>
                                        <input class="form-control" id="toDate" name="datefilter" type="text" placeholder="Select a date" readonly="readonly">
                                        <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                                    </div>
                                </div>
                                <div class="col-md-3 col-lg-3">
                                    <label class="font-normal group-label">담당자</label>
                                    <div class="form-group">
                                        <select class="form-control col-md-12" name="keyword">
                                            <option value="">전체 조회 </option>
                                            <option value="김규호">김규호 (미처리 : 0 total : 5)</option>
                                            <option value="황성훈">황성훈 (미처리 : 0 total : 5)</option>
                                            <option value="김종욱">김종욱 (미처리 : 1 total : 6)</option>
                                            <option value="이대웅">이대웅 (미처리 : 0 total : 8)</option>
                                            <option value="박준순">박준순 (미처리 : 0 total : 7)</option>
                                            <option value="정인석">정인석 (미처리 : 0 total : 8)</option>
                                            <option value="이영진">이영진 (미처리 : 0 total : 5)</option>
                                            <option value="김정기">김정기 (미처리 : 0 total : 5)</option>
                                            <option value="노효성">노효성 (미처리 : 0 total : 4)</option>
                                            <option value="이상훈">이상훈 (미처리 : 0 total : 6)</option>
                                            <option value="양한">양한 (미처리 : 0 total : 5)</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-3 col-lg-3">
                                    <label class="font-normal">상담상태</label>
                                    <div class="form-group">
                                        <select class="form-control col-md-12" name="keyword">
                                            <option value="상담완료">상담완료</option>
                                            <option value="상담완료">상담완료</option>
                                            <option value="부재">부재</option>
                                            <option value="재상담">재상담</option>
                                            <option value="진행중">진행중</option>
                                            <option value="가망고객">가망고객</option>
                                            <option value="계약완료">계약완료</option>
                                            <option value="출고완료">출고완료</option>
                                            <option value="취소">취소</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-12 text-right search-field-button">
                                    <button class="btn btn-primary" id="btnSearchApply">
                                        <i class="fa fa-search"></i>
                                        조회
                                    </button>
                                </div>
                            </div>
                        </div>
                        <!-- Widget ID (each widget will need unique ID)-->
                        <div class="jarviswidget jarviswidget-color-red" id="wid-id-0" data-widget-colorbutton="false" data-widget-editbutton="false" data-widget-deletebutton="false">
                            <!-- widget options:
                               usage: <div class="jarviswidget" id="wid-id-0" data-widget-editbutton="false">
                               
                               data-widget-colorbutton="false"
                               data-widget-editbutton="false"
                               data-widget-togglebutton="false"
                               data-widget-deletebutton="false"
                               data-widget-fullscreenbutton="false"
                               data-widget-custombutton="false"
                               data-widget-collapsed="true"
                               data-widget-sortable="false"
                               
                               -->
                            <header>
                                <span class="widget-icon"> <i class="fa fa-table"></i>
                                    </span>
                                <h2>중고차 상담신청 목록</h2>
                            </header>
                            <!-- widget div-->
                            <div>
                                <!-- widget edit box -->
                                <div class="jarviswidget-editbox">
                                    <!-- This area used as dropdown edit box -->
                                </div>
                                <!-- end widget edit box -->
                                <!-- widget content -->
                                <div class="widget-body">
                                    <table id="dt_basic" class="table table-striped table-bordered table-hover" width="100%">
                                        <thead>
                                            <tr>
                                                <th data-class="expand">#</th>
                                                <th>등록일</th>
                                                <th>신청자</th>
                                                <th data-hide="phone,tablet">차종</th>
                                                <th data-hide="phone,tablet">Phone</th>
                                                <th data-hide="phone,tablet">Email</th>
                                                <th data-hide="phone,tablet">관리담당(상담원)</th>
                                                <th data-hide="phone,tablet">상태</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                        </tbody>
                                    </table>
                                </div>
                                <!-- end widget content -->
                            </div>
                            <!-- end widget div -->
                        </div>
                        <!-- end widget -->
                    </article>
                    <!-- WIDGET END -->
                </div>
                <!-- end row -->
                <!-- end row -->
            </section>
            <!-- end widget grid -->
        </div>
        <!-- END MAIN CONTENT -->
    </div>
    <!-- END MAIN PANEL -->
    <!-- PAGE FOOTER -->
    <div class="page-footer">
    </div>
    <!-- END PAGE FOOTER -->
    <!-- SHORTCUT AREA : With large tiles (activated via clicking user name tag)
        Note: These tiles are completely responsive,
        you can add as many as you like
        -->
    <div id="shortcut">
        <ul>
            <li>
                <a href="inbox.html" class="jarvismetro-tile big-cubes bg-color-blue"> <span class="iconbox"> <i class="fa fa-envelope fa-4x"></i> <span>Mail <span class="label pull-right bg-color-darken">14</span></span> </span> </a>
            </li>
            <li>
                <a href="calendar.html" class="jarvismetro-tile big-cubes bg-color-orangeDark"> <span class="iconbox"> <i class="fa fa-calendar fa-4x"></i> <span>Calendar</span> </span> </a>
            </li>
            <li>
                <a href="gmap-xml.html" class="jarvismetro-tile big-cubes bg-color-purple"> <span class="iconbox"> <i class="fa fa-map-marker fa-4x"></i> <span>Maps</span> </span> </a>
            </li>
            <li>
                <a href="invoice.html" class="jarvismetro-tile big-cubes bg-color-blueDark"> <span class="iconbox"> <i class="fa fa-book fa-4x"></i> <span>Invoice <span class="label pull-right bg-color-darken">99</span></span> </span> </a>
            </li>
            <li>
                <a href="gallery.html" class="jarvismetro-tile big-cubes bg-color-greenLight"> <span class="iconbox"> <i class="fa fa-picture-o fa-4x"></i> <span>Gallery </span> </span> </a>
            </li>
            <li>
                <a href="profile.html" class="jarvismetro-tile big-cubes selected bg-color-pinkDark"> <span class="iconbox"> <i class="fa fa-user fa-4x"></i> <span>My Profile </span> </span> </a>
            </li>
        </ul>
    </div>
    <!-- END SHORTCUT AREA -->
    <!-- Modal -->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h3 class="modal-title" id="myModalLabel"><i class="fa fa-car fa-1x" style="color: darkgrey;"></i> 중고차 상담신청 상세보기 <span style="font-weight: bold;font-style: italic;">#225886</span></h3>
                </div>
                <div class="modal-body">
                    <fieldset>
                        <legend>고객상담 신청내용</legend>
                        
                        <div class="form-group">
                            <div class="row">
                                <div class="col-lg-6 col-md-6">
                                    <label>이름</label>
                                    <input type="text" class="form-control readonly" value="이상민" readonly="readonly">
                                </div>
                                <div class="col-lg-6 col-md-6">
                                    <label>연락처</label>
                                    <input type="text" class="form-control readonly" value="010-7703-2551" readonly="readonly">
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="row">
                                <div class="col-lg-6 col-md-6">
                                    <label>신청일시</label>
                                    <input type="text" class="form-control readonly" value="2018년 08월 18일 19시 11분" readonly="readonly">
                                </div>
                                <div class="col-lg-6 col-md-6">
                                    <label>차종</label>
                                    <input type="text" class="form-control readonly" value="더 뉴 소렌토" readonly="readonly">
                                </div>
                            </div>
                        </div>
                        
                        <legend>매니저 상담내용</legend>
                        <div class="row">
                            <div class="col-lg-6 col-md-6">
                                <label><i class="fa fa-asterisk fa-1x" style="color: red;"></i> 배정 상담원</label>
                                <select class="form-control" id="select-1">
                                    <option value="미지정">미지정 </option>
                                    <option value="김규호">김규호 (미처리 : 0 total : 5)</option>
                                    <option value="황성훈">황성훈 (미처리 : 0 total : 5)</option>
                                    <option value="김종욱">김종욱 (미처리 : 1 total : 6)</option>
                                    <option value="이대웅">이대웅 (미처리 : 0 total : 8)</option>
                                    <option value="박준순">박준순 (미처리 : 0 total : 7)</option>
                                    <option value="정인석">정인석 (미처리 : 0 total : 8)</option>
                                    <option value="이영진">이영진 (미처리 : 0 total : 5)</option>
                                    <option value="김정기">김정기 (미처리 : 0 total : 5)</option>
                                    <option value="노효성">노효성 (미처리 : 0 total : 4)</option>
                                    <option value="이상훈">이상훈 (미처리 : 0 total : 6)</option>
                                    <option value="양한">양한 (미처리 : 0 total : 5)</option>
                                </select>
                            </div>
                            <div class="col-lg-6 col-md-6">
                                <label><i class="fa fa-asterisk fa-1x" style="color: red;"></i> 상태</label>
                                <select class="form-control" id="select-1">
                                    <option>신규문의</option>
                                    <option value="상담완료">상담완료</option>
                                    <option value="중복">중복</option>
                                    <option value="부재">부재</option>
                                    <option value="재상담">재상담</option>
                                    <option value="진행중">진행중</option>
                                    <option value="가망고객">가망고객</option>
                                    <option value="계약완료">계약완료</option>
                                    <option value="출고완료" disabled="disabled">출고완료</option>
                                    <option value="취소">취소</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label><i class="fa fa-asterisk fa-1x" style="color: red;"></i> 관리메모</label>
                            <textarea class="form-control" placeholder="상담 신청 내용을 등록하세요." rows="5"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label>견적서 파일 업로드</label>
                            <form action="upload.php" class="dropzone" id="mydropzone"></form>
                        </div>

                    </fieldset>
                       
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal"> <i class="fa fa-ban"></i> 취소</button>
                    <button type="button" class="btn btn-danger"><i class="fa fa-trash-o"></i> 삭제</button>
                    <button type="button" class="btn btn-primary"><i class="fa fa-save"></i> 저장</button>
                    <button type="button" class="btn btn-primary hide"><i class="fa fa-plus-square-o"></i> 등록</button>
                    <!-- <button type="button" id="btnInsertManager" class="btn btn-primary hide">등록</button> -->
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
    </div>
    <!-- /.modal -->
    <!--================================================== -->
    <!-- smartdirect script loader-->
    <script src="js/smartdirectcar-common-jsloader.js"></script>
    <!-- Append External JS here-->
    <script src="js/smartdirectcar-testdata.js"></script>
    <script src="js/plugin/daterangepicker/moment.min.js"></script>
    <script src="js/plugin/daterangepicker/daterangepicker.js"></script>
    <!-- DROPZONE -->
    <script src="js/plugin/dropzone/dropzone.min.js"></script>

    <!-- ./Append External JS here-->
    <script>
    // Menu Nav 
    loadNavMenu('used_car_management');

    var table = null;
    var _data = null;

    $(document).ready(function() {

        // DO NOT REMOVE : GLOBAL FUNCTIONS!
        pageSetUp();

        // init Table;
        initTable();

        //
        doSearch();

        $("#btnSearchApply").on("click", doSearch);

        $("#btnUpdateManager").on("click", updateManager);

        $("#btnInsertManager").on("click", insertManager);

        $("#btnDeleteManager").on("click", deleteManager);

        $("#showInsertManagerModal").on("click", function() {
            // field Clear
            $("#managerIdx, #managerId, #managerNm, #managerPw, #managerPw, #grade, #email, #phone").val("");

            //ID Field
            $("#managerId").removeClass("disabled").removeAttr("disabled");

            // button set
            $("#btnUpdateManager").addClass("hide");
            $("#btnDeleteManager").addClass("hide");
            $("#btnInsertManager").removeClass("hide");

            $('#myModal').modal('show');
        })

        $('input[name="datefilter"]').daterangepicker({
            autoUpdateInput: false,
            autoApply: true,
            locale: {
                cancelLabel: 'Clear'
            }
        });

        $('input[name="datefilter"]').on('apply.daterangepicker', function(ev, picker) {
            //$(this).val(picker.startDate.format('YYYY-MM-DD') + ' - ' + picker.endDate.format('YYYY-MM-DD'));
            $('input[name="datefilter"]')[0].value = picker.startDate.format('YYYY-MM-DD');
            $('input[name="datefilter"]')[1].value = picker.endDate.format('YYYY-MM-DD');
        });

        $('input[name="datefilter"]').on('cancel.daterangepicker', function(ev, picker) {
            $(this).val('');
        });

        $("#mydropzone").dropzone({
            autoDiscover:false,
            //url: "/file/post",
            addRemoveLinks: true,
            maxFilesize: 5.0, // MB
            dictDefaultMessage: '<span class="text-center"><span class="font-lg visible-xs-block visible-sm-block visible-lg-block"><span class="font-lg"><i class="fa fa-caret-right text-danger"></i> Drop files <span class="font-xs">to upload</span></span><span>&nbsp&nbsp<h4 class="display-inline"> (Or Click)</h4></span>',
            dictResponseError: 'Error uploading file!'
        });

    });

    function initTable() {

        /* // DOM Position key index //
        
        l - Length changing (dropdown)
        f - Filtering input (search)
        t - The Table! (datatable)
        i - Information (records)
        p - Pagination (paging)
        r - pRocessing 
        < and > - div elements
        <"#id" and > - div with an id
        <"class" and > - div with a class
        <"#id.class" and > - div with an id and class
        
        Also see: http://legacy.datatables.net/usage/features
        */

        /* BASIC ;*/
        var responsiveHelper_dt_basic = undefined;
        var responsiveHelper_datatable_fixed_column = undefined;
        var responsiveHelper_datatable_col_reorder = undefined;
        var responsiveHelper_datatable_tabletools = undefined;

        var breakpointDefinition = {
            tablet: 1024,
            phone: 480
        };
        table = $('#dt_basic').DataTable({
            "sDom": "<'dt-toolbar'<'col-sm-6 col-xs-12 hidden-xs'l><'col-xs-12 col-sm-6'f>r>"+
                    "t"+
                    "<'dt-toolbar-footer'<'col-sm-6 col-xs-12 hidden-xs'i><'col-xs-12 col-sm-6'p>>",

            // "<'dt-toolbar'<'col-xs-12 col-sm-6'f><'col-sm-6 col-xs-6 hidden-xs'T>r>"+
            // "t"+
            // "<'dt-toolbar-footer'<'col-sm-6 col-xs-12 hidden-xs'i><'col-sm-6 col-xs-12'p>>",
            // "oTableTools": {
            //   "aButtons": [
            //      "copy",
            //      "csv",
            //      "xls",
            //         {
            //             "sExtends": "pdf",
            //             "sTitle": "SmartAdmin_PDF",
            //             "sPdfMessage": "SmartAdmin PDF Export",
            //             "sPdfSize": "letter"
            //         },
            //          {
            //              "sExtends": "print",
            //              "sMessage": "Generated by SmartAdmin <i>(press Esc to close)</i>"
            //          }
            //      ],
            //     "sSwfPath": "js/plugin/datatables/swf/copy_csv_xls_pdf.swf"
            // },
            autoWidth: true,
            preDrawCallback: function() {
                // Initialize the responsive datatables helper once.
                if (!responsiveHelper_dt_basic) {
                    responsiveHelper_dt_basic = new ResponsiveDatatablesHelper($('#dt_basic'), breakpointDefinition);
                }
            },
            data: [],
            rowCallback: function(nRow) {
                responsiveHelper_dt_basic
                    .createExpandIcon(nRow);
            },
            drawCallback: function(oSettings) {
                responsiveHelper_dt_basic.respond();
            },
            columns: [{
                data: "idx",
                "width": "7%"
            }, {
                data: "reg_date",
                "width": "13%"
            }, {
                data: "name",
                "width": "7%"
            }, {
                data: "car"
            }, {
                data: "tel",
                "width": "10%"
            }, {
                data: "email",
                "width": "10%"
            }, {
                data: "manager",
                "width": "13%"
            }, {
                data: "status",
                "width": "7%"
            }],
            columnDefs: [{
                "targets": [2],
                "data": "name",
                "render": function(data, type, row, meta) {
                    return '<a href="javascript:showDetailModal(\'' + row["idx"] + '\');">' + data + '</a>';
                }
            }]

        });
    }

    function doSearch() {

        var data = applicationData();

        _data = data;

        table.clear();
        table.rows.add(data).draw();

        /*
        $.ajax({
            url : '/manager/selectManager',
            data : {},
            cache : false,
            type : "get",
            dataType : 'json',
            success : function(data) {
                
                
            },
            error : function(xhr, status, error) {
            }
        });
        */
    }

    // function moveToDetail(idx){
    //     console.log(idx);

    //     document.location.href = "counseling_applications_detail.html";
    // }

    function showDetailModal(idx) {

        var rowData = _data.filter(function(item) {
            return (item.manager_idx == idx)
        })

        if (!$.isEmptyObject(rowData)) {
            var data = rowData[0];
            $("#managerIdx").val(data.manager_idx);
            $("#managerId").val(data.manager_id);
            $("#managerNm").val(data.manager_nm);
            $("#managerPw").val(data.manager_pw);
            $("#managerGrade").val(data.grade);
            $("#email").val(data.email);
            $("#phone").val(data.phone);
        }

        //ID Field
        $("#managerId").addClass("disabled").prop("disabled", true);
        //
        $("#btnUpdateManager").removeClass("hide");
        $("#btnDeleteManager").removeClass("hide");
        $("#btnInsertManager").addClass("hide");

        $('#myModal').modal('show');

    }

    function updateManager() {
        var data = {
            manager_idx: $("#managerIdx").val(),
            manager_id: $("#managerId").val(),
            manager_nm: $("#managerNm").val(),
            manager_pw: $("#managerPw").val(),
            grade: $("#managerGrade").val(),
            email: $("#email").val(),
            phone: $("#phone").val()
        }

        $.ajax({
            url: '/manager/updateManager',
            data: JSON.stringify(data),
            cache: false,
            type: "post",
            dataType: 'json',
            contentType: "application/json; charset=UTF-8",
            success: function(data) {
                $('#myModal').modal('hide');
                doSearch();
            },
            error: function(xhr, status, error) {}
        });
    }

    function insertManager() {

        if ($("#smart-form-register").valid()) {
            alert("등록 실행");
        } else {
            return;
        }

        alert("비행기 데이터");

        var data = {
            manager_idx: $("#managerIdx").val(),
            manager_id: $("#managerId").val(),
            manager_nm: $("#managerNm").val(),
            manager_pw: $("#managerPw").val(),
            grade: $("#managerGrade").val(),
            email: $("#email").val(),
            phone: $("#phone").val()
        }




        // $('#').validate(function(){
        //  submitHandler: function(form) {
        //                  alert("등록 실행!");
        //              }



        // });

        // $.ajax({
        //  url : '/manager/insertManager',
        //  data : JSON.stringify(data),
        //  cache : false,
        //  type : "post",
        //  dataType : 'json',
        //  contentType : "application/json; charset=UTF-8",
        //  success : function(data) {
        //      $('#myModal').modal('hide');
        //      doSearch();
        //  },
        //  error : function(xhr, status, error) {
        //  }
        // });
    }

    function deleteManager() {
        if (confirm("삭제하시겠습니까?")) {
            var data = {
                manager_idx: $("#managerIdx").val()
            }
            $.ajax({
                url: '/manager/deleteManager',
                data: JSON.stringify(data),
                cache: false,
                type: "post",
                dataType: 'json',
                contentType: "application/json; charset=UTF-8",
                success: function(data) {
                    $('#myModal').modal('hide');
                    doSearch();
                },
                error: function(xhr, status, error) {}
            });
        }
    }

    var $registerForm = $("#smart-form-register").validate({

        // Rules for form validation
        rules: {
            username: {
                required: true
            },
            email: {
                required: true,
                email: true
            },
            password: {
                required: true,
                minlength: 3,
                maxlength: 20
            },
            passwordConfirm: {
                required: true,
                minlength: 3,
                maxlength: 20,
                equalTo: '#password'
            },
            firstname: {
                required: true
            },
            lastname: {
                required: true
            },
            gender: {
                required: true
            },
            terms: {
                required: true
            }
        },

        // Messages for form validation
        messages: {
            login: {
                required: 'Please enter your login'
            },
            email: {
                required: 'Please enter your email address',
                email: 'Please enter a VALID email address'
            },
            password: {
                required: 'Please enter your password'
            },
            passwordConfirm: {
                required: 'Please enter your password one more time',
                equalTo: 'Please enter the same password as above'
            },
            firstname: {
                required: 'Please select your first name'
            },
            lastname: {
                required: 'Please select your last name'
            },
            gender: {
                required: 'Please select your gender'
            },
            terms: {
                required: 'You must agree with Terms and Conditions'
            }
        },

        // Do not change code below
        errorPlacement: function(error, element) {
            error.insertAfter(element.parent());
        }
    });
    </script>
    
  
</body>

</html>